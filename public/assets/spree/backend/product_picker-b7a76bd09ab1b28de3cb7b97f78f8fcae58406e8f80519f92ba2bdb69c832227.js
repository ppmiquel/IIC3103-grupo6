$.fn.productAutocomplete=function(t){"use strict";function e(t){return Select2.util.escapeMarkup(t.name)}t=t||{};var u="undefined"!=typeof t.multiple?t.multiple:!0;this.select2({minimumInputLength:3,multiple:u,initSelection:function(t,e){$.get(Spree.routes.product_search,{ids:t.val().split(","),token:Spree.api_key},function(t){e(u?t.products:t.products[0])})},ajax:{url:Spree.routes.product_search,datatype:"json",data:function(t){return{q:{name_or_master_sku_cont:t},m:"OR",token:Spree.api_key}},results:function(t){var e=t.products?t.products:[];return{results:e}}},formatResult:e,formatSelection:e})},$(document).ready(function(){$(".product_picker").productAutocomplete()});